postgres-1  | 
postgres-1  | PostgreSQL Database directory appears to contain a database; Skipping initialization
postgres-1  | 
postgres-1  | 2025-09-21 17:05:04.766 UTC [1] LOG:  starting PostgreSQL 15.14 (Debian 15.14-1.pgdg13+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 14.2.0-19) 14.2.0, 64-bit
postgres-1  | 2025-09-21 17:05:04.767 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
postgres-1  | 2025-09-21 17:05:04.767 UTC [1] LOG:  listening on IPv6 address "::", port 5432
postgres-1  | 2025-09-21 17:05:04.804 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
postgres-1  | 2025-09-21 17:05:04.882 UTC [29] LOG:  database system was shut down at 2025-09-21 17:04:55 UTC
postgres-1  | 2025-09-21 17:05:04.959 UTC [1] LOG:  database system is ready to accept connections
postgres-1  | 2025-09-21 17:09:23.472 UTC [35] ERROR:  column transactions.status does not exist at character 190
postgres-1  | 2025-09-21 17:09:23.472 UTC [35] STATEMENT:  SELECT transactions.id, transactions.user_id, transactions.tx_type, transactions.amount, transactions.currency, transactions.related_entity, transactions.related_id, transactions.metadata, transactions.status, transactions.created_at 
postgres-1  | 	FROM transactions 
postgres-1  | 	WHERE CAST((transactions.metadata ->> $1::TEXT) AS VARCHAR) = $2::VARCHAR
app-1       | INFO:     Started server process [1]
app-1       | INFO:     Waiting for application startup.
app-1       | INFO:     Application startup complete.
app-1       | INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
app-1       | INFO:     172.18.0.1:48204 - "GET /api/v1/health HTTP/1.1" 200 OK
app-1       | INFO:     172.18.0.1:48204 - "GET /admin HTTP/1.1" 200 OK
app-1       | INFO:     172.18.0.1:34444 - "GET /api/v1/health HTTP/1.1" 200 OK
app-1       | INFO:     172.18.0.1:45826 - "GET /admin HTTP/1.1" 200 OK
app-1       | INFO:     172.18.0.1:45826 - "GET /assets/index-7a1bdd04.js HTTP/1.1" 200 OK
app-1       | INFO:     172.18.0.1:45830 - "GET /assets/index-4be2f783.css HTTP/1.1" 200 OK
app-1       | INFO:     172.18.0.1:41686 - "POST /api/v1/admin/login HTTP/1.1" 500 Internal Server Error
app-1       | INFO:     172.18.0.1:38492 - "POST /api/v1/admin/login HTTP/1.1" 500 Internal Server Error
app-1       | INFO:     172.18.0.1:39744 - "GET /admin HTTP/1.1" 200 OK
app-1       | INFO:     172.18.0.1:39744 - "GET /api/v1/admin/matches HTTP/1.1" 200 OK
app-1       | INFO:     172.18.0.1:39744 - "GET /admin HTTP/1.1" 200 OK
app-1       | INFO:     172.18.0.1:39744 - "GET /api/v1/admin/matches HTTP/1.1" 200 OK
app-1       | INFO:     172.18.0.1:39744 - "GET /admin HTTP/1.1" 200 OK
app-1       | INFO:     172.18.0.1:39744 - "GET /api/v1/admin/matches HTTP/1.1" 200 OK
app-1       | INFO:     172.18.0.1:39744 - "GET /admin HTTP/1.1" 200 OK
app-1       | INFO:     172.18.0.1:39744 - "GET /api/v1/admin/matches HTTP/1.1" 200 OK
app-1       | INFO:     172.18.0.1:39744 - "GET /api/v1/admin/invite_codes HTTP/1.1" 401 Unauthorized
app-1       | INFO:     172.18.0.1:39744 - "GET /admin HTTP/1.1" 200 OK
app-1       | INFO:     172.18.0.1:39744 - "GET /api/v1/admin/invite_codes HTTP/1.1" 401 Unauthorized
app-1       | INFO:     172.18.0.1:43782 - "GET /admin HTTP/1.1" 200 OK
app-1       | INFO:     172.18.0.1:43782 - "GET /assets/index-7a1bdd04.js HTTP/1.1" 200 OK
app-1       | INFO:     172.18.0.1:43788 - "GET /assets/index-4be2f783.css HTTP/1.1" 200 OK
app-1       | INFO:     172.18.0.1:43782 - "GET /admin HTTP/1.1" 200 OK
app-1       | INFO:     172.18.0.1:43796 - "POST /api/v1/admin/login HTTP/1.1" 500 Internal Server Error
app-1       | INFO:     172.18.0.1:44144 - "GET /api/v1/health HTTP/1.1" 200 OK
app-1       | INFO:     172.18.0.1:44144 - "GET /docs HTTP/1.1" 200 OK
app-1       | INFO:     172.18.0.1:45764 - "GET /api/v1/health HTTP/1.1" 200 OK
app-1       | (trapped) error reading bcrypt version
app-1       | Traceback (most recent call last):
app-1       |   File "/usr/local/lib/python3.11/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
app-1       |     version = _bcrypt.__about__.__version__
app-1       |               ^^^^^^^^^^^^^^^^^
app-1       | AttributeError: module 'bcrypt' has no attribute '__about__'
app-1       | INFO:     172.18.0.1:45764 - "POST /api/v1/admin/login HTTP/1.1" 200 OK
app-1       | INFO:     172.18.0.1:45764 - "POST /api/v1/admin/matches HTTP/1.1" 200 OK
app-1       | INFO:     172.18.0.1:45764 - "POST /api/v1/admin/matches/match-14/contests HTTP/1.1" 200 OK
app-1       | INFO:     172.18.0.1:47964 - "POST /api/v1/webhooks/bep20 HTTP/1.1" 422 Unprocessable Entity
app-1       | INFO:     172.18.0.1:54662 - "POST /api/v1/contests/contest-match-14-new/join HTTP/1.1" 200 OK
app-1       | INFO:     172.18.0.1:54662 - "POST /api/v1/admin/contests/contest-match-14-new/settle HTTP/1.1" 200 OK
app-1       | INFO:     172.18.0.1:54662 - "POST /api/v1/withdrawals HTTP/1.1" 201 Created
app-1       | INFO:     172.18.0.1:54662 - "POST /api/v1/admin/withdrawals/b8b06ae6-1771-4787-9005-cced999971ac/approve HTTP/1.1" 200 OK
app-1       | INFO:     172.18.0.1:54662 - "GET /api/v1/health HTTP/1.1" 200 OK
app-1       | INFO:     172.18.0.1:49326 - "GET /api/v1/health HTTP/1.1" 200 OK
app-1       | INFO:     172.18.0.1:49326 - "POST /api/v1/admin/login HTTP/1.1" 200 OK
app-1       | INFO:     172.18.0.1:49326 - "POST /api/v1/admin/matches HTTP/1.1" 200 OK
app-1       | INFO:     172.18.0.1:49326 - "POST /api/v1/admin/matches/match-14/contests HTTP/1.1" 200 OK
app-1       | Error processing deposit confirmation e2e-live-20250921T223900Z: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column transactions.status does not exist
app-1       | [SQL: SELECT transactions.id, transactions.user_id, transactions.tx_type, transactions.amount, transactions.currency, transactions.related_entity, transactions.related_id, transactions.metadata, transactions.status, transactions.created_at 
app-1       | FROM transactions 
app-1       | WHERE CAST((transactions.metadata ->> $1::TEXT) AS VARCHAR) = $2::VARCHAR]
app-1       | [parameters: ('tx_hash', 'e2e-live-20250921T223900Z')]
app-1       | (Background on this error at: https://sqlalche.me/e/20/f405)
app-1       | INFO:     172.18.0.1:45804 - "POST /api/v1/webhooks/bep20 HTTP/1.1" 500 Internal Server Error
app-1       | INFO:     172.18.0.1:38868 - "POST /api/v1/contests/contest-match-14-new/join HTTP/1.1" 200 OK
app-1       | INFO:     172.18.0.1:38868 - "POST /api/v1/admin/contests/contest-match-14-new/settle HTTP/1.1" 200 OK
app-1       | INFO:     172.18.0.1:38868 - "POST /api/v1/withdrawals HTTP/1.1" 201 Created
app-1       | INFO:     172.18.0.1:38868 - "POST /api/v1/admin/withdrawals/844df749-8ded-4b50-b8c4-dd8b56880fbd/approve HTTP/1.1" 200 OK
app-1       | INFO:     172.18.0.1:38868 - "GET /api/v1/health HTTP/1.1" 200 OK
redis-1     | Starting Redis Server
redis-1     | 1:C 21 Sep 2025 17:05:04.437 * oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo
redis-1     | 1:C 21 Sep 2025 17:05:04.437 * Redis version=8.2.1, bits=64, commit=00000000, modified=1, pid=1, just started
redis-1     | 1:C 21 Sep 2025 17:05:04.437 * Configuration loaded
redis-1     | 1:M 21 Sep 2025 17:05:04.438 * monotonic clock: POSIX clock_gettime
redis-1     | 1:M 21 Sep 2025 17:05:04.450 * Running mode=standalone, port=6379.
redis-1     | 1:M 21 Sep 2025 17:05:04.453 * <bf> RedisBloom version 8.2.0 (Git=unknown)
redis-1     | 1:M 21 Sep 2025 17:05:04.455 * <bf> Registering configuration options: [
redis-1     | 1:M 21 Sep 2025 17:05:04.457 * <bf> 	{ bf-error-rate       :      0.01 }
redis-1     | 1:M 21 Sep 2025 17:05:04.457 * <bf> 	{ bf-initial-size     :       100 }
redis-1     | 1:M 21 Sep 2025 17:05:04.457 * <bf> 	{ bf-expansion-factor :         2 }
redis-1     | 1:M 21 Sep 2025 17:05:04.457 * <bf> 	{ cf-bucket-size      :         2 }
redis-1     | 1:M 21 Sep 2025 17:05:04.457 * <bf> 	{ cf-initial-size     :      1024 }
redis-1     | 1:M 21 Sep 2025 17:05:04.457 * <bf> 	{ cf-max-iterations   :        20 }
redis-1     | 1:M 21 Sep 2025 17:05:04.457 * <bf> 	{ cf-expansion-factor :         1 }
redis-1     | 1:M 21 Sep 2025 17:05:04.457 * <bf> 	{ cf-max-expansions   :        32 }
redis-1     | 1:M 21 Sep 2025 17:05:04.457 * <bf> ]
redis-1     | 1:M 21 Sep 2025 17:05:04.458 * Module 'bf' loaded from /usr/local/lib/redis/modules//redisbloom.so
redis-1     | 1:M 21 Sep 2025 17:05:04.536 * <search> Redis version found by RedisSearch : 8.2.1 - oss
redis-1     | 1:M 21 Sep 2025 17:05:04.536 * <search> RediSearch version 8.2.1 (Git=dba8dd0)
redis-1     | 1:M 21 Sep 2025 17:05:04.536 * <search> Low level api version 1 initialized successfully
redis-1     | 1:M 21 Sep 2025 17:05:04.537 * <search> gc: ON, prefix min length: 2, min word length to stem: 4, prefix max expansions: 200, query timeout (ms): 500, timeout policy: return, cursor read size: 1000, cursor max idle (ms): 300000, max doctable size: 1000000, max number of search results:  1000000, 
redis-1     | 1:M 21 Sep 2025 17:05:04.539 * <search> Initialized thread pools!
redis-1     | 1:M 21 Sep 2025 17:05:04.540 * <search> Disabled workers threadpool of size 0
redis-1     | 1:M 21 Sep 2025 17:05:04.541 * <search> Subscribe to config changes
redis-1     | 1:M 21 Sep 2025 17:05:04.541 * <search> Enabled role change notification
redis-1     | 1:M 21 Sep 2025 17:05:04.543 * <search> Cluster configuration: AUTO partitions, type: 0, coordinator timeout: 0ms
redis-1     | 1:M 21 Sep 2025 17:05:04.547 * <search> Register write commands
redis-1     | 1:M 21 Sep 2025 17:05:04.547 * Module 'search' loaded from /usr/local/lib/redis/modules//redisearch.so
redis-1     | 1:M 21 Sep 2025 17:05:04.550 * <timeseries> RedisTimeSeries version 80200, git_sha=1439d4a439ca9c063e6ef124a510abff09a5d493
redis-1     | 1:M 21 Sep 2025 17:05:04.551 * <timeseries> Redis version found by RedisTimeSeries : 8.2.1 - oss
redis-1     | 1:M 21 Sep 2025 17:05:04.551 * <timeseries> Registering configuration options: [
redis-1     | 1:M 21 Sep 2025 17:05:04.551 * <timeseries> 	{ ts-compaction-policy   :              }
redis-1     | 1:M 21 Sep 2025 17:05:04.551 * <timeseries> 	{ ts-num-threads         :            3 }
redis-1     | 1:M 21 Sep 2025 17:05:04.551 * <timeseries> 	{ ts-retention-policy    :            0 }
redis-1     | 1:M 21 Sep 2025 17:05:04.551 * <timeseries> 	{ ts-duplicate-policy    :        block }
redis-1     | 1:M 21 Sep 2025 17:05:04.551 * <timeseries> 	{ ts-chunk-size-bytes    :         4096 }
redis-1     | 1:M 21 Sep 2025 17:05:04.551 * <timeseries> 	{ ts-encoding            :   compressed }
redis-1     | 1:M 21 Sep 2025 17:05:04.551 * <timeseries> 	{ ts-ignore-max-time-diff:            0 }
redis-1     | 1:M 21 Sep 2025 17:05:04.551 * <timeseries> 	{ ts-ignore-max-val-diff :     0.000000 }
redis-1     | 1:M 21 Sep 2025 17:05:04.551 * <timeseries> ]
redis-1     | 1:M 21 Sep 2025 17:05:04.552 * <timeseries> Detected redis oss
redis-1     | 1:M 21 Sep 2025 17:05:04.554 * <timeseries> Enabled diskless replication
redis-1     | 1:M 21 Sep 2025 17:05:04.554 * Module 'timeseries' loaded from /usr/local/lib/redis/modules//redistimeseries.so
redis-1     | 1:M 21 Sep 2025 17:05:04.570 * <ReJSON> Created new data type 'ReJSON-RL'
redis-1     | 1:M 21 Sep 2025 17:05:04.581 * <ReJSON> version: 80200 git sha: unknown branch: unknown
redis-1     | 1:M 21 Sep 2025 17:05:04.581 * <ReJSON> Exported RedisJSON_V1 API
redis-1     | 1:M 21 Sep 2025 17:05:04.581 * <ReJSON> Exported RedisJSON_V2 API
redis-1     | 1:M 21 Sep 2025 17:05:04.581 * <ReJSON> Exported RedisJSON_V3 API
redis-1     | 1:M 21 Sep 2025 17:05:04.581 * <ReJSON> Exported RedisJSON_V4 API
redis-1     | 1:M 21 Sep 2025 17:05:04.581 * <ReJSON> Exported RedisJSON_V5 API
redis-1     | 1:M 21 Sep 2025 17:05:04.581 * <ReJSON> Enabled diskless replication
redis-1     | 1:M 21 Sep 2025 17:05:04.581 * <ReJSON> Initialized shared string cache, thread safe: false.
redis-1     | 1:M 21 Sep 2025 17:05:04.581 * Module 'ReJSON' loaded from /usr/local/lib/redis/modules//rejson.so
redis-1     | 1:M 21 Sep 2025 17:05:04.581 * <search> Acquired RedisJSON_V5 API
redis-1     | 1:M 21 Sep 2025 17:05:04.583 * Server initialized
redis-1     | 1:M 21 Sep 2025 17:05:04.583 * <search> Loading event starts
redis-1     | 1:M 21 Sep 2025 17:05:04.583 * <search> Enabled workers threadpool of size 4
redis-1     | 1:M 21 Sep 2025 17:05:04.583 * Loading RDB produced by version 7.4.5
redis-1     | 1:M 21 Sep 2025 17:05:04.583 * RDB age 10 seconds
redis-1     | 1:M 21 Sep 2025 17:05:04.583 * RDB memory usage when created 0.95 Mb
redis-1     | 1:M 21 Sep 2025 17:05:04.584 * Done loading RDB, keys loaded: 3, keys expired: 0.
redis-1     | 1:M 21 Sep 2025 17:05:04.584 * <search> Disabled workers threadpool of size 4
redis-1     | 1:M 21 Sep 2025 17:05:04.584 * <search> Loading event ends
redis-1     | 1:M 21 Sep 2025 17:05:04.584 * DB loaded from disk: 0.001 seconds
redis-1     | 1:M 21 Sep 2025 17:05:04.584 * Ready to accept connections tcp
worker-1    | Traceback (most recent call last):
worker-1    |   File "/usr/local/bin/celery", line 7, in <module>
worker-1    |     sys.exit(main())
worker-1    |              ^^^^^^
worker-1    |   File "/usr/local/lib/python3.11/site-packages/celery/__main__.py", line 15, in main
worker-1    |     sys.exit(_main())
worker-1    |              ^^^^^^^
worker-1    |   File "/usr/local/lib/python3.11/site-packages/celery/bin/celery.py", line 236, in main
worker-1    |     return celery(auto_envvar_prefix="CELERY")
worker-1    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
worker-1    |   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1462, in __call__
worker-1    |     return self.main(*args, **kwargs)
worker-1    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
worker-1    |   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1383, in main
worker-1    |     rv = self.invoke(ctx)
worker-1    |          ^^^^^^^^^^^^^^^^
worker-1    |   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1850, in invoke
worker-1    |     return _process_result(sub_ctx.command.invoke(sub_ctx))
worker-1    |                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
worker-1    |   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1246, in invoke
worker-1    |     return ctx.invoke(self.callback, **ctx.params)
worker-1    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
worker-1    |   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 814, in invoke
worker-1    |     return callback(*args, **kwargs)
worker-1    |            ^^^^^^^^^^^^^^^^^^^^^^^^^
worker-1    |   File "/usr/local/lib/python3.11/site-packages/click/decorators.py", line 34, in new_func
worker-1    |     return f(get_current_context(), *args, **kwargs)
worker-1    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
worker-1    |   File "/usr/local/lib/python3.11/site-packages/celery/bin/base.py", line 134, in caller
worker-1    |     return f(ctx, *args, **kwargs)
worker-1    |            ^^^^^^^^^^^^^^^^^^^^^^^
worker-1    |   File "/usr/local/lib/python3.11/site-packages/celery/bin/worker.py", line 348, in worker
worker-1    |     worker = app.Worker(
worker-1    |              ^^^^^^^^^^^
worker-1    |   File "/usr/local/lib/python3.11/site-packages/celery/worker/worker.py", line 93, in __init__
worker-1    |     self.app.loader.init_worker()
worker-1    |   File "/usr/local/lib/python3.11/site-packages/celery/loaders/base.py", line 110, in init_worker
worker-1    |     self.import_default_modules()
worker-1    |   File "/usr/local/lib/python3.11/site-packages/celery/loaders/base.py", line 105, in import_default_modules
worker-1    |     return [self.import_task_module(m) for m in self.default_modules]
worker-1    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
worker-1    |   File "/usr/local/lib/python3.11/site-packages/celery/loaders/base.py", line 105, in <listcomp>
worker-1    |     return [self.import_task_module(m) for m in self.default_modules]
worker-1    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^
worker-1    |   File "/usr/local/lib/python3.11/site-packages/celery/loaders/base.py", line 85, in import_task_module
worker-1    |     return self.import_from_cwd(module)
worker-1    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
worker-1    |   File "/usr/local/lib/python3.11/site-packages/celery/loaders/base.py", line 91, in import_from_cwd
worker-1    |     return import_from_cwd(
worker-1    |            ^^^^^^^^^^^^^^^^
worker-1    |   File "/usr/local/lib/python3.11/site-packages/celery/utils/imports.py", line 104, in import_from_cwd
worker-1    |     return imp(module, package=package)
worker-1    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
worker-1    |   File "/usr/local/lib/python3.11/site-packages/celery/loaders/base.py", line 88, in import_module
worker-1    |     return importlib.import_module(module, package=package)
worker-1    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
worker-1    |   File "/usr/local/lib/python3.11/importlib/__init__.py", line 126, in import_module
worker-1    |     return _bootstrap._gcd_import(name[level:], package, level)
worker-1    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
worker-1    |   File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
worker-1    |   File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
worker-1    |   File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
worker-1    |   File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
worker-1    |   File "<frozen importlib._bootstrap_external>", line 940, in exec_module
worker-1    |   File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
worker-1    |   File "/app/app/tasks/webhook_processing.py", line 12, in <module>
worker-1    |     from app.core.redis_client import get_redis
worker-1    | ImportError: cannot import name 'get_redis' from 'app.core.redis_client' (/app/app/core/redis_client.py)
