# get_db() Usage Analysis Report

## Correct Usage (Depends pattern):
- app/api/v1/webhooks.py:128 - session: AsyncSession = Depends(get_db)
- app/api/v1/admin.py:52,92,154,239,280 - session: AsyncSession = Depends(get_db)
- app/api/v1/wallet.py:49,75,149 - session: AsyncSession = Depends(get_db)
- app/core/auth.py:78,109 - session: AsyncSession = Depends(get_db)
- app/api/v1/contest.py:78,145,236,300,336 - session: AsyncSession = Depends(get_db)
- app/api/v1/auth.py:58,107,180 - session: AsyncSession = Depends(get_db_session)

## Incorrect Usage (Direct call):
- app/api/webhooks.py:279 - async with get_db() as db: (should use Depends pattern)

## Function Definitions:
- app/db/session.py:33 - async def get_db() -> AsyncSession: (definition)
- app/db/base.py:34 - async def get_db() -> AsyncSession: (duplicate definition - should be removed)

## Issues Found:
1. app/api/webhooks.py uses direct get_db() call instead of Depends pattern
2. app/db/base.py has duplicate get_db() definition that should be removed
3. app/api/v1/auth.py uses get_db_session instead of get_db (inconsistent)

## Files to Fix:
1. app/api/webhooks.py - convert to Depends pattern
2. app/db/base.py - remove duplicate get_db definition
3. app/api/v1/auth.py - standardize to use get_db instead of get_db_session
